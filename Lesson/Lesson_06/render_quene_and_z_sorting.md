## Render Quene and Depth/Z Sorting 渲染队列和深度排序
在本章中，我们将了解什么事排序：Z-Sorting/Depth-Sorting以及在渲染管道中是如何对物体进行排序的：什么物体在什么物体的前面。

---
### 1. Render Order 渲染队列
>决定了物体渲染的顺序，哪个物体先渲染，哪个物体后渲染

在Unity中，物体距离相机的Z距离决定了渲染队列的顺序。unity将选择距离相机最远的物体先绘制，然后再依此类推最后绘制距离相机最近的物体。

Unity 也有一个特殊的队列系统称为 **Render Quene**。
>在Render Quene中，我们可以给每个物体不同的标记顺序，这个标记是从0到5000之间的数字。被标记为0的物体将会被首先绘制，相应的标记为5000的物体将会被最后绘制。 
>

####在Shader中有个关键字 **Quene**:
---
**"Background"**
> 取值范围是[0 - 1499]，其中默认值是1000。可以在shader中增减数值来改变默认值。例如"Quene" = "Backgroud + 1"，这里的Quene值就是1001；“Quene" = "Background - 10"，那么这里的 Quene值就是990。
---
**Geometry**
>取值范围是[1500-2399]，其中默认值是2000

---
**AlphaTest**
>取值范围是[2400-2699]，其中默认值是2450

---
**Transparent**
>取值范围是[2700-3599]，其中默认值是3000

---
**Overlay**
>取值范围是[3600-5000]，其中默认值是4000
---
### 2. Sorting(Z-sorting/Depth Soring)
>是指完成指定哪个物体或者物体的部分会在其他物体的上面或者后面绘制的过程。在现代渲染管线中被称为深度绘制或者z-TEST绘制。

在深度绘制排序中，所有像素的深度信息都会被记录在一个缓存中，我们称为z-buffer。在绘制的时候，当我们绘制一个像素的时候我们会将这个像素的深度信息和在z-buffer中的这个位置的像素的深度信息作为比较，如果新像素的深度信息小于已经在屏幕上的像素的深度信息，那么这个像素就通过了z-test，它将会被绘制在屏幕上，并且在z-buffer中会把原来像素的深度信息更新为当前像素的深度信息。如果它的深度信息大于当前的深度信息，那么这个像素没有通过z-test，它将会被舍弃，不作任何操作。